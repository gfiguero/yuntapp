<% content_for :title do %>
  <%= I18n.t('views.title.residence_certificates') %>
<% end %>

<% content_for :breadcrumb do %>
  <li><%= link_to I18n.t('views.title.residence_certificates'), panel_residence_certificates_path %></li>
  <li><%= I18n.t('actions.new') %></li>
<% end %>

<div class="w-full">
  <h1 class="font-bold text-4xl my-4"><%= I18n.t('views.title.residence_certificates') %></h1>
  <h3 class="font-bold text-xl mb-4"><%= I18n.t('views.headers.new') %></h3>

  <div class="flex flex-row gap-2 mb-4">
    <%= link_to raw(icon('list') + I18n.t('actions.index')), panel_residence_certificates_path, class: "btn btn-soft" %>
  </div>

  <%= form_with(model: [:panel, @residence_certificate], class: "grid gap-4 w-1/3") do |form| %>

    <% invalid = @residence_certificate.errors.include?(:member_id) %>
    <%= form.label :member_id, I18n.t('attributes.residence_certificate.member'), class: "floating-label" do %>
      <%= form.collection_select :member_id, @approved_members, :id, :name, { prompt: true }, { class: "select w-full validator #{'input-error' if invalid}", required: true } %>
      <span><%= I18n.t('attributes.residence_certificate.member') %></span>
    <% end %>
    <%= raw(error_message(invalid, @residence_certificate.errors.full_messages_for(:member_id))) if invalid %>

    <% invalid = @residence_certificate.errors.include?(:purpose) %>
    <%= form.label :purpose, I18n.t('attributes.residence_certificate.purpose'), class: "floating-label" do %>
      <%= form.text_area :purpose, class: "textarea w-full validator #{'input-error' if invalid}", required: true, placeholder: I18n.t('attributes.residence_certificate.purpose') %>
      <span><%= I18n.t('attributes.residence_certificate.purpose') %></span>
    <% end %>
    <%= raw(error_message(invalid, @residence_certificate.errors.full_messages_for(:purpose))) if invalid %>

    <%= form.submit I18n.t('actions.save'), class: "btn btn-success" %>
  <% end %>
</div>

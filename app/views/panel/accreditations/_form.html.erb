<%= form_with(model: member, url: (member.persisted? ? panel_accreditation_path : panel_accreditation_path), method: (member.persisted? ? :patch : :post), class: "grid gap-4 w-1/3") do |form| %>

  <div class="card bg-base-200 p-4 mb-2">
    <h3 class="font-bold mb-2"><%= I18n.t('persona.subtitle.your_identity') %></h3>
    <dl class="grid gap-1">
      <div class="flex gap-2">
        <dt class="font-medium"><%= I18n.t('attributes.persona.name') %>:</dt>
        <dd><%= current_user.persona.name %></dd>
      </div>
      <div class="flex gap-2">
        <dt class="font-medium"><%= I18n.t('attributes.persona.run') %>:</dt>
        <dd><%= current_user.persona.run %></dd>
      </div>
      <% if current_user.persona.phone.present? %>
        <div class="flex gap-2">
          <dt class="font-medium"><%= I18n.t('attributes.persona.phone') %>:</dt>
          <dd><%= current_user.persona.phone %></dd>
        </div>
      <% end %>
    </dl>
  </div>

  <% invalid = member.errors.include?(:documents) %>
  <div>
    <%= form.label :documents, I18n.t('attributes.member.documents'), class: "label" %>
    <%= form.file_field :documents, multiple: true, class: "file-input w-full #{'input-error' if invalid}" %>
  </div>
  <%= raw(error_message(invalid, member.errors.full_messages_for(:documents))) %>

  <% if member.persisted? && member.documents.attached? %>
    <div>
      <p class="label"><%= I18n.t('attributes.member.documents') %> actuales:</p>
      <ul class="list-disc pl-4">
        <% member.documents.each do |doc| %>
          <li><%= link_to doc.filename, rails_blob_path(doc, disposition: "attachment"), class: "link link-primary" %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form.submit I18n.t('actions.save'), class: "btn btn-success" %>
<% end %>

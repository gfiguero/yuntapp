<%= form_with(model: [:panel, household_unit], class: "grid gap-4 w-1/3") do |form| %>

  <% invalid = household_unit.errors.include?(:commune_id) %>
  <%= form.label :commune_id, "Comuna", class: "floating-label" do %>
    <%= form.collection_select :commune_id, Commune.all, :id, :name, { prompt: true }, { class: "select w-full validator #{'input-error' if invalid}", required: true } %>
    <span>Comuna</span>
  <% end %>
  <%= raw(error_message(invalid, household_unit.errors.full_messages_for(:commune_id))) %>

  <% invalid = household_unit.errors.include?(:neighborhood_delegation_id) %>
  <%= form.label :neighborhood_delegation_id, I18n.t('attributes.household_unit.neighborhood_delegation'), class: "floating-label" do %>
    <%# TODO: Filtrar delegaciones segÃºn la comuna seleccionada usando JS o Turbo %>
    <%= form.collection_select :neighborhood_delegation_id, NeighborhoodDelegation.all, :id, :name, { prompt: true }, { class: "select w-full validator #{'input-error' if invalid}", required: true } %>
    <span><%= I18n.t('attributes.household_unit.neighborhood_delegation') %></span>
  <% end %>
  <%= raw(error_message(invalid, household_unit.errors.full_messages_for(:neighborhood_delegation_id))) %>

  <% invalid = household_unit.errors.include?(:number) %>
  <%= form.label :number, I18n.t('attributes.household_unit.number'), class: "floating-label" do %>
    <%= form.text_field :number, class: "input w-full validator #{'input-error' if invalid}", required: true, placeholder: I18n.t('attributes.household_unit.number') %>
    <span><%= I18n.t('attributes.household_unit.number') %></span>
  <% end %>
  <%= raw(error_message(invalid, household_unit.errors.full_messages_for(:number))) %>

  <% invalid = household_unit.errors.include?(:address_line_1) %>
  <%= form.label :address_line_1, I18n.t('attributes.household_unit.address_line_1'), class: "floating-label" do %>
    <%= form.text_field :address_line_1, class: "input w-full validator #{'input-error' if invalid}", placeholder: I18n.t('attributes.household_unit.address_line_1') %>
    <span><%= I18n.t('attributes.household_unit.address_line_1') %></span>
  <% end %>
  <%= raw(error_message(invalid, household_unit.errors.full_messages_for(:address_line_1))) %>

  <% invalid = household_unit.errors.include?(:address_line_2) %>
  <%= form.label :address_line_2, I18n.t('attributes.household_unit.address_line_2'), class: "floating-label" do %>
    <%= form.text_field :address_line_2, class: "input w-full validator #{'input-error' if invalid}", placeholder: I18n.t('attributes.household_unit.address_line_2') %>
    <span><%= I18n.t('attributes.household_unit.address_line_2') %></span>
  <% end %>
  <%= raw(error_message(invalid, household_unit.errors.full_messages_for(:address_line_2))) %>

  <%= form.submit I18n.t('actions.save'), class: "btn btn-success" %>
<% end %>

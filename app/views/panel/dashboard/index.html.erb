<div class="w-full">
  <h1 class="font-bold text-4xl my-4">Bienvenido, <%= current_user.name %></h1>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

    <%# Verificación de Identidad %>
    <div class="card bg-base-200 shadow-sm">
      <div class="card-body">
        <h2 class="card-title"><%= I18n.t('views.title.verification') %></h2>
        <% if current_user.persona&.verified? %>
          <div class="badge badge-success"><%= I18n.t('persona.statuses.verified') %></div>
          <p class="text-sm mt-2"><%= current_user.persona.name %> &mdash; <%= current_user.persona.run %></p>
        <% elsif current_user.persona&.pending_verification? %>
          <div class="badge badge-warning"><%= I18n.t('persona.statuses.pending') %></div>
          <p class="text-sm mt-2"><%= I18n.t('persona.help.pending_review') %></p>
        <% elsif current_user.persona&.rejected_verification? %>
          <div class="badge badge-error"><%= I18n.t('persona.statuses.rejected') %></div>
        <% else %>
          <p class="text-sm"><%= I18n.t('persona.help.not_verified') %></p>
          <div class="card-actions justify-end mt-2">
            <%= link_to I18n.t('persona.actions.verify'), new_panel_verification_path, class: "btn btn-sm btn-primary" %>
          </div>
        <% end %>
        <% if current_user.persona %>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Ver detalle", panel_verification_path, class: "btn btn-sm btn-soft" %>
          </div>
        <% end %>
      </div>
    </div>

    <%# Acreditación %>
    <div class="card bg-base-200 shadow-sm">
      <div class="card-body">
        <h2 class="card-title">Acreditación</h2>
        <% if current_user.member %>
          <% if current_user.member.approved? %>
            <div class="badge badge-success"><%= I18n.t("member.statuses.approved") %></div>
            <p class="text-sm mt-2"><%= current_user.member.name %> &mdash; <%= current_user.member.run %></p>
          <% elsif current_user.member.pending? %>
            <div class="badge badge-warning"><%= I18n.t("member.statuses.pending") %></div>
            <p class="text-sm mt-2">Tu solicitud está siendo revisada.</p>
          <% elsif current_user.member.rejected? %>
            <div class="badge badge-error"><%= I18n.t("member.statuses.rejected") %></div>
            <p class="text-sm mt-2">Tu solicitud fue rechazada. Puedes reenviarla.</p>
          <% end %>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Ver detalle", panel_accreditation_path, class: "btn btn-sm btn-soft" %>
          </div>
        <% else %>
          <p class="text-sm">Aún no has solicitado acreditación.</p>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Acreditarme", new_panel_accreditation_path, class: "btn btn-sm btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>

    <%# Domicilio %>
    <div class="card bg-base-200 shadow-sm">
      <div class="card-body">
        <h2 class="card-title">Domicilio</h2>
        <% if current_user.household_unit %>
          <p class="text-sm">
            <%= current_user.household_unit.number %>
            &mdash; <%= current_user.household_unit.neighborhood_delegation.name %>
          </p>
          <% if current_user.household_unit.address_line_1.present? %>
            <p class="text-sm text-base-content/60"><%= current_user.household_unit.address_line_1 %></p>
          <% end %>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Editar", edit_panel_household_unit_path(current_user.household_unit), class: "btn btn-sm btn-soft" %>
          </div>
        <% else %>
          <p class="text-sm">No tienes un domicilio registrado.</p>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Crear domicilio", new_panel_household_unit_path, class: "btn btn-sm btn-primary" %>
          </div>
        <% end %>
      </div>
    </div>

    <%# Socios del domicilio (solo household_admin) %>
    <% if current_user.household_admin? %>
      <div class="card bg-base-200 shadow-sm">
        <div class="card-body">
          <h2 class="card-title">Socios del Domicilio</h2>
          <p class="text-sm">
            <%= current_user.household_unit.members.approved.count %> aprobados,
            <%= current_user.household_unit.members.pending.count %> pendientes
          </p>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Gestionar", panel_members_path, class: "btn btn-sm btn-soft" %>
          </div>
        </div>
      </div>
    <% end %>

    <%# Certificados de residencia (solo household_admin) %>
    <% if current_user.household_admin? %>
      <div class="card bg-base-200 shadow-sm">
        <div class="card-body">
          <h2 class="card-title">Certificados de Residencia</h2>
          <p class="text-sm">Solicita y revisa certificados de residencia.</p>
          <div class="card-actions justify-end mt-2">
            <%= link_to "Ver certificados", panel_residence_certificates_path, class: "btn btn-sm btn-soft" %>
          </div>
        </div>
      </div>
    <% end %>

    <%# Perfil %>
    <div class="card bg-base-200 shadow-sm">
      <div class="card-body">
        <h2 class="card-title">Mi Perfil</h2>
        <p class="text-sm"><%= current_user.email %></p>
        <div class="card-actions justify-end mt-2">
          <%= link_to "Editar perfil", edit_panel_profile_path, class: "btn btn-sm btn-soft" %>
        </div>
      </div>
    </div>

  </div>
</div>
